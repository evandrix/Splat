<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>2.2.1 Binding Fundamentals</title>
<META NAME="description" CONTENT="2.2.1 Binding Fundamentals">
<META NAME="keywords" CONTENT="tut">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<link rel="STYLESHEET" href="tut.css">
<link rel="first" href="tut.html">
<link rel="contents" href="contents.html" title="Contents">

<LINK REL="next" HREF="node29.html">
<LINK REL="previous" HREF="node24.html">
<LINK REL="up" HREF="node24.html">
<LINK REL="next" HREF="node26.html">
</head>
<body>
<DIV CLASS="navigation">
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td><A HREF="node24.html"><img src="../icons/previous.gif"
  border="0" height="32"
  alt="Previous Page" width="32"></A></td>
<td><A HREF="node24.html"><img src="../icons/up.gif"
  border="0" height="32"
  alt="Up One Level" width="32"></A></td>
<td><A HREF="node26.html"><img src="../icons/next.gif"
  border="0" height="32"
  alt="Next Page" width="32"></A></td>
<td align="center" width="100%">Building Component-Based 
<BR>
Applications with PEAK</td>
<td><A href="contents.html"><img src="../icons/contents.gif"
  border="0" height="32"
  alt="Contents" width="32"></A></td>
<td><img src="../icons/blank.gif"
  border="0" height="32"
  alt="" width="32"></td>
<td><img src="../icons/blank.gif"
  border="0" height="32"
  alt="" width="32"></td>
</tr></table>
<b class="navlabel">Previous:</b> <a class="sectref" HREF="node24.html">2.2 Specifying Attributes Using</A>
<b class="navlabel">Up:</b> <a class="sectref" HREF="node24.html">2.2 Specifying Attributes Using</A>
<b class="navlabel">Next:</b> <a class="sectref" HREF="node26.html">2.2.1.1 Deriving from binding.Component</A>
<br><hr>
</DIV>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION004210000000000000000">
2.2.1 Binding Fundamentals</A>
</H2>

<P>
It's time to write some code!  Our objective: create a ``car" class
that keeps track of its passengers.

<P>
<dl><dd><pre class="verbatim">&gt;&gt;&gt; from peak.api import binding
&gt;&gt;&gt; class Car:
        passengers = binding.Make(dict, attrName='passengers')

&gt;&gt;&gt; aCar=Car()
&gt;&gt;&gt; print aCar.passengers
{}
</pre></dl>

<P>
Let's go through this sample line by line.  In the first line we import the
<tt class="module">peak.binding</tt> API.  Then, we create a simple class, with one attribute,
<tt class="member">passengers</tt>.  We define the attribute using the <tt class="function">binding.Make</tt>
function, which creates an attribute binding from a type or function, and an
optional attribute name.

<P>
Instances of class <tt class="class">Car</tt> will each get their own <tt class="member">passengers</tt>
attribute: a dictionary.  Now, if you're new to Python, you might wonder why we
don't place a dictionary directly in the class, like this:

<P>
<dl><dd><pre class="verbatim">class Car:
    passengers = {}
</pre></dl>

<P>
The problem is that attributes defined in a Python class body are shared, so
every car will end up with the same passenger dictionary.  Experienced Python
programmers solve this problem by placing code in their <tt class="method">__init__</tt>
method to initialize the structure, like so:

<P>
<dl><dd><pre class="verbatim">class Car:
    def __init__(self):
        self.passengers = {}
</pre></dl>

<P>
This works alright for simple situations, but gets more complex when you use
inheritance to create subclasses of <tt class="class">Car</tt>.  It becomes necessary to
call the superclass <tt class="method">__init__</tt> methods, and the order of initialization
for different attributes can get tricky.

<P>
If you develop in Java or C++ or some other language that has instance
variable initializers, you'll be happy to know that PEAK lets you have them
in Python too - only better.  In most static languages, variable initializers
run at object creation time.  So, either you create <i>all</i> of an object's
collaborators at creation time, or you write accessor functions to hide
whether the fields or attributes are initialized.  This can be quite tedious
in complex programs.

<P>
But PEAK's attribute bindings are <b>lazy</b>.  They do not compute their
value until they are used.  If we take a new instance of our <tt class="class">Car</tt>
class, and print its dictionary before and after referencing the
<tt class="member">passengers</tt> attribute:

<P>
<dl><dd><pre class="verbatim">&gt;&gt;&gt; anotherCar=Car()
&gt;&gt;&gt; print anotherCar.__dict__
{}
&gt;&gt;&gt; print anotherCar.passengers
{}
&gt;&gt;&gt; print anotherCar.__dict__
{'passengers': {}}
</pre></dl>

<P>
We find that the object doesn't really <i>have</i> the attribute until we
try to access it, but once we do access it, it springs into being as though
it had always been there, and it acts like a normal attribute thereafter.

<P>
If you're familiar with the Eiffel programming language, you'll notice that
PEAK attribute bindings are quite similar to Eiffel's <b>once functions</b>,
except that they're for instances rather than for classes.  A ``once function"
is computed at most once, the first time its value is referenced.  In PEAK,
attribute bindings compute their value once, and then cache the result, until
or unless the attribute is deleted.

<P>

<p><hr>
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></a>

<UL CLASS="ChildLinks">
<LI><A href="node26.html">2.2.1.1 Deriving from <tt class="class">binding.Component</tt></a>
<LI><A href="node27.html">2.2.1.2 <tt class="class">binding.Attribute</tt> - The Basis for all Bindings</a>
<LI><A href="node28.html">2.2.1.3 Re-binding, Pre-binding, Un-binding, and Persistence</a>
</ul>
<!--End of Table of Child-Links-->

<DIV CLASS="navigation">
<p><hr>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td><A HREF="node24.html"><img src="../icons/previous.gif"
  border="0" height="32"
  alt="Previous Page" width="32"></A></td>
<td><A HREF="node24.html"><img src="../icons/up.gif"
  border="0" height="32"
  alt="Up One Level" width="32"></A></td>
<td><A HREF="node26.html"><img src="../icons/next.gif"
  border="0" height="32"
  alt="Next Page" width="32"></A></td>
<td align="center" width="100%">Building Component-Based 
<BR>
Applications with PEAK</td>
<td><A href="contents.html"><img src="../icons/contents.gif"
  border="0" height="32"
  alt="Contents" width="32"></A></td>
<td><img src="../icons/blank.gif"
  border="0" height="32"
  alt="" width="32"></td>
<td><img src="../icons/blank.gif"
  border="0" height="32"
  alt="" width="32"></td>
</tr></table>
<b class="navlabel">Previous:</b> <a class="sectref" HREF="node24.html">2.2 Specifying Attributes Using</A>
<b class="navlabel">Up:</b> <a class="sectref" HREF="node24.html">2.2 Specifying Attributes Using</A>
<b class="navlabel">Next:</b> <a class="sectref" HREF="node26.html">2.2.1.1 Deriving from binding.Component</A>
<hr>
<span class="release-info">Release 0.5a3, documentation updated on June 11, 2003.</span>
</DIV>
<!--End of Navigation Panel-->

</BODY>
</HTML>
