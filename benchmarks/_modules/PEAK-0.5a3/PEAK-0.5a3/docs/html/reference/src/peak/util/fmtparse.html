<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
          "http://www.w3.org/TR/html40/loose.dtd">

<html>
         
  <head>
    <title>Module: fmtparse</title>
  </head>

  <body bgcolor="#ffffff">

        <p><i><a href="../../../index.html">Table of Contents</a></i></p>
        
        <table border="0" cellpadding="5" cellspacing="0" width="100%">
        <tr>
            <th rowspan="2"
                valign="top"
                align="left"
                width="10%"
                bgcolor="#88bbee"><font color="#000000">Module: fmtparse</font>
            </th>
            <th bgcolor="#88bbee"
                width="90%"
                align="right"><font color="#000000">./src/peak/util/fmtparse.py</font>
            </th>
        </tr>
        <tr>
        <td>
        
<h3>Parsing and formatting based on production rules</h3>
<p> This module provides some special parsing and formatting features not found
 in other Python parsing libraries.  Specifically it:
<ul>
<li><p>supports reversing the production process to convert parsed output back
      to a canonical version of the input</p></li>
<li><p>Supports &quot;smart tokenizing&quot; based on contextually-available delimiters</p></li>
<li><p>does not separate &quot;lexing&quot; or &quot;tokenizing&quot; from &quot;parsing&quot;, so lexical
      analysis can be parse-context dependent</p></li>
<li><p>uses &quot;Packrat Parsing&quot; for fast recursive-descent parsing with arbitrary
      lookahead depths (see http://www.pdos.lcs.mit.edu/~baford/packrat/ for
      more on this innovative approach)</p></li>
<li><p>is designed to accomodate parsing things other than strings (e.g. object
      streams, SAX event lists,...?)</p></li>
<li><p>allows the definition of arbitrary &quot;rule&quot;, &quot;input&quot; and &quot;state&quot; objects
      that can be fitted into the framework to handle specialized input types,
      context passing, etc.</p></li>

</ul>
</p>
<p> The first four features were critical requirements for PEAK's URL-parsing
 tools.  We wanted to make it super-easy to create robust URL syntaxes that
 would produce canonical representations of URLs from input data as well as
 sensibly parse input strings.  And part of &quot;super-easy&quot; meant not having
 to write bazillions of regular expressions to parse every field in a URL.</p>
<h4> Limitations:</h4>

<ul>
<li><p>The framework isn't designed for &quot;formatting&quot; to non-strings.
      Specifically, most rules assume that their sub-rules will only
      <code>write()</code> things that can be joined with <code>"".join()</code> when formatting.</p></li>
<li><p>Some parts of the framework may not be 100% Unicode-safe, even if a
      UnicodeInput type were implemented.  Code review and patches appreciated.</p></li>

</ul>
<h4> TODO:</h4>

<ul>
<li><p>Docstrings, docstrings, docstrings...  and a test suite!</p></li>
<li><p>ParseError should provide line/column info about the error location, not
      just offset, and it should be provided by input.error() rather than by
      the rule signalling the error.  Of course, all the rules should be
      calling input.error() instead of creating ParseError instances...</p></li>
<li><p>Perform timing tests and investigate parsing speedups for:
<ul>
<li><p>&quot;Compiling&quot; rules to regular expressions + postprocessors</p></li>
<li><p>&quot;Optimizing&quot; rules (e.g. convert Optional(user, <code>@</code>) to something
          that forward-scans for <code>@</code> before trying to match <code>user</code>).</p></li>
<li><p>Moving speed-critical parts to C</p></li>

</ul>
</p></li>

</ul>
<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Imported modules">Imported modules</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
<b>from</b> peak.binding.once <b>import</b> Make<br>
<b>from</b> peak.util.symbols <b>import</b> NOT_GIVEN<br>
<b>import</b> <a href="http://www.python.org/doc/current/lib/module-re.html">re</a><br>

</td></tr>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Functions">Functions</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
<a href="#format">format</a><br>
<a href="#parse">parse</a><br>
<a href="#uniquechars">uniquechars</a><br>


        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="format"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">format&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
format ( aDict,  syntax )

</pre></font>


        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="parse"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">parse&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
parse ( input,  rule )

</pre></font>

<table border="0" cellpadding="5" cellspacing="0" width="100%">

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Exceptions">Exceptions</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
ParseError("Expected EOF, found %r at position %d in %r" %( input [ state : ], state, input ) )<br>
state<br>

</td></tr>
</table>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="uniquechars"></a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">uniquechars&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        <font color="#000088"><pre>
uniquechars ( s )

</pre></font>

</td></tr>

        <tr>
            <th bgcolor="#99ccff"
                rowspan="2"
                valign="top"
                align="left"
                width="20%"
                >
                <font color="#000000">
                  <a name="Classes">Classes</a>&nbsp;
                </font>
            </th>
            <th bgcolor="#99ccff"
                valign="top"
                align="left"
                width="80%"
                >
                <font color="#000000">&nbsp;</font>
            </th>
        </tr>
        <tr>
        <td>
        
<table border="0" cellpadding="3" cellspacing="0">
<tr><td valign="top" align="left"><p><a href="fmtparse/Alternatives.html">Alternatives</a></p></td><td valign="top" align="left">
<p>Match one out of many alternatives</p>
</td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/Conversion.html">Conversion</a></p></td><td valign="top" align="left"></td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/Epsilon.html">Epsilon</a></p></td><td valign="top" align="left">
<p>Simplest possible rule: matches nothing, formats nothing</p>
</td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/ExtractString.html">ExtractString</a></p></td><td valign="top" align="left">
<p>Return matched subrule as a string</p>
</td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/IInput.html">IInput</a></p></td><td valign="top" align="left"></td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/IRule.html">IRule</a></p></td><td valign="top" align="left">
<p>Production rule protocol for translation between data and strings</p>
</td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/Input.html">Input</a></p></td><td valign="top" align="left"></td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/MatchString.html">MatchString</a></p></td><td valign="top" align="left">
<p>Match a regex, or longest string that doesn't include a terminator</p>
</td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/MissingData.html">MissingData</a></p></td><td valign="top" align="left"></td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/Named.html">Named</a></p></td><td valign="top" align="left">
<p>Named value - converts to/from dictionary/items</p>
</td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/Optional.html">Optional</a></p></td><td valign="top" align="left">
<p>Wrapper that makes a construct optional</p>
</td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/ParseError.html">ParseError</a></p></td><td valign="top" align="left"></td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/Repeat.html">Repeat</a></p></td><td valign="top" align="left"></td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/Rule.html">Rule</a></p></td><td valign="top" align="left">
<p>Production rule protocol for translation between data and strings</p>
</td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/Sequence.html">Sequence</a></p></td><td valign="top" align="left"></td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/Set.html">Set</a></p></td><td valign="top" align="left"></td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/StringConstant.html">StringConstant</a></p></td><td valign="top" align="left"></td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/StringInput.html">StringInput</a></p></td><td valign="top" align="left"></td></tr>
<tr><td valign="top" align="left"><p><a href="fmtparse/Tuple.html">Tuple</a></p></td><td valign="top" align="left">
<p>Sequence of unnamed values, rendered as a tuple (e.g. key/value)</p>
</td></tr>
</table>
</td></tr>
</td></tr>
</table>

        </td>
        </tr>
        </table>

        <hr>

        <p><i><a href="../../../index.html">Table of Contents</a></i></p>

        <font size="-2"><i>This document was automatically generated
        on Tue Feb 17 19:55:52 2004 by
        <a href="http://happydoc.sourceforge.net">HappyDoc</a> version
        2.1</i></font>
        
        </body>
        </html>
        