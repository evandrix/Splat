<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Introspection</title>
<link rel="stylesheet" href="../format.css" type="text/css">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="keywords" content="Python, introspection, tutorial, programming language">
<meta name="description" content="Introspection">
<meta name="language" content="en">
<meta name="author" content="Jan Bodnar">
<meta name="distribution" content="global">

</head>

<body>

<div style="position:fixed;left:2%;top:10px">
<script type="text/javascript"><!--
google_ad_client = "pub-9706709751191532";
/* NewVertical */
google_ad_slot = "4231459001";
google_ad_width = 120;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>

<div class="content">

<a href="/" title="Home">Home</a>&nbsp;
<a href="..">Contents</a>


<h1>Introspection</h1>

<p>
In this part of the Python programming tutorial, we will talk about introspection. 
</p>

<script type="text/javascript"><!--
google_ad_client = "pub-9706709751191532";
/* NewSquare */
google_ad_slot = "0364418177";
google_ad_width = 300;
google_ad_height = 250;
//-->
</script> 
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script> 

<p>
<b>Introspection</b> is an act of self examination. In computer programming, 
introspection is the ability to determine the type of an object at runtime. 
Python programming language has a large support of introspection. 
Everything in Python is an object. Every object in Python may have attributes 
and methods. By using introspection, we can dynamically inspect Python objects. 
</p>

<h2>The dir() function</h2>

<p>
The <b class="keyword">dir()</b> function is the most important function when doing introspection. 
The function returns a sorted list of attributes and methods belonging to an object. 
</p>


<pre class="code">
>>> dir(())
['__add__', '__class__', '__contains__', '__delattr__', '__doc__', '__eq__', '__ge__', 
'__getattribute__', '__getitem__', '__getnewargs__', '__getslice__', '__gt__', '__hash__',
'__init__', '__iter__', '__le__', '__len__', '__lt__', '__mul__', '__ne__', '__new__', 
'__reduce__', '__reduce_ex__', '__repr__', '__rmul__', '__setattr__', '__str__']
</pre>

<p>
Here we see an output of the dir() function for a tuple object. 
</p>

<pre class="code">
>>> print ().__doc__
tuple() -> an empty tuple
tuple(sequence) -> tuple initialized from sequence's items

If the argument is a tuple, the return value is the same object.
</pre>

<p>
Our investigation showed, that there is a <b class="keyword">__doc__</b> attribute for a tuple object. 
</p>

<pre class="code">
#!/usr/bin/python

# dir.py

import sys

class Object:
   def __init__(self):
      pass
   def examine(self):
      print self


o = Object()

print dir(o)
print dir([])
print dir({})
print dir(1)
print dir()
print dir(len)
print dir(sys)
print dir("String")
</pre>

<p>
The example examines several objects using the dir() function. A user defined object, 
native data types, a function, a string or a number. Without any argument, dir() returns names in the current scope.
</p>



<h2>The type(), id() functions</h2>

<p>
The <b class="keyword">type()</b> function returns the type of an object. 
</p>

<pre class="code">
#!/usr/bin/python

# types.py

import sys


def function(): pass

class MyObject():
   def __init__(self):
      pass

o = MyObject()

print type(1)
print type("")
print type([])
print type({})
print type(())
print type(object)
print type(function)
print type(MyObject)
print type(o)
print type(sys)
</pre>

<p>
The example print various types of objects to the console screen. 
</p>

<pre>
$ ./types.py 
&lt;type 'int'&gt;
&lt;type 'str'&gt;
&lt;type 'list'&gt;
&lt;type 'dict'&gt;
&lt;type 'tuple'&gt;
&lt;type 'type'&gt;
&lt;type 'function'&gt;
&lt;type 'classobj'&gt;
&lt;type 'instance'&gt;
&lt;type 'module'&gt;
</pre>

<p>
The <b class="keyword">id()</b> returns a special id of an object. 
</p>

<pre class="code">
#!/usr/bin/python

# ids.py

import sys

def fun(): pass

class MyObject():
   def __init__(self):
      pass

o = MyObject()

print id(1)
print id("")
print id({})
print id([])
print id(sys)
print id(fun)
print id(MyObject)
print id(o)
print id(object)
</pre>

<p>
The code example prints ids of various objects. Both built-in and custom. 
</p>

<pre>
$ ./ids.py 
135717024
3084304536
3084111220
3084104940
3084304500
3084112812
3084074556
3084130444
135568640
</pre>

<h2>Various</h2>

<p>
Next we will show various other ways of inspecting our objects. 
</p>


<pre class="code">
#!/usr/bin/python

# attr.py

def fun(): pass


print hasattr(object, '__doc__')
print hasattr(fun, '__doc__')
print hasattr(fun, '__call__')

print getattr(object, '__doc__')
print getattr(fun, '__doc__')
</pre>

<p>
The <b class="keyword">hasattr()</b> function checks, if an object has an attribute. 
The <b class="keyword">getattr()</b> function returns the contents of an attribute, if there are some. 
</p>

<pre>
$ ./attr.py 
True
True
True
The most base type
None
</pre>

<p>
The <b class="keyword">isinstance</b> function checks, if an objects is an instance 
of a specific class. 
</p>

<pre>
>>> print isinstance.__doc__
isinstance(object, class-or-type-or-tuple) -> bool

Return whether an object is an instance of a class or of a subclass thereof.
With a type as second argument, return whether that is the object's type.
The form using a tuple, isinstance(x, (A, B, ...)), is a shortcut for
isinstance(x, A) or isinstance(x, B) or ... (etc.).
</pre>

<p>
We can get the describtion of a function interactively. 
</p>


<pre class="code">
#!/usr/bin/python

# instance.py


class MyObject():
   def __init__(self):
      pass

o = MyObject()

print isinstance(o, MyObject)
print isinstance(o, object)
print isinstance(2, int)
print isinstance('str', str)
</pre>

<p>
As we know, everything is an object in Python. Even numbers or strings. The <b class="keyword">object</b> is a base type of all objects in Python. That is why isinstance(o, object) returns True.
</p>

<pre>
$ ./instance.py 
True
True
True
True
</pre>

<p>
The <b class="keyword">issubclass()</b> function checks, if a specific class 
is a derived class of another class. 
</p>

<pre class="code">
#!/usr/bin/python

# subclass.py

class Object():
   def __init__(self):
      pass

class Wall(Object):
   def __init__(self):
      pass

print issubclass(Object, Object)
print issubclass(Object, Wall)
print issubclass(Wall, Object)
print issubclass(Wall, Wall)
</pre>

<p>
In our code example, the Wall class is a subclass of the Object class.
Interesingly, Object and Wall are subclasses of themselves.
The Object class is not a subclass of class Wall. 
</p>

<pre>
$ ./subclass.py 
True
False
True
True
</pre>

<p>
The <b class="keyword">__doc__</b> attribute gives some documentation about 
an object and the <b class="keyword">__name__</b> attribute holds the name of the object. 
</p>

<pre class="code">
#!/usr/bin/python

# namedoc.py


def noaction():
   '''A function, which does nothing'''
   pass


funcs = [noaction, len, str]

for i in funcs:
   print i.__name__
   print i.__doc__
   print "-" * 75
</pre>


<p>
In our example, we crete a list of three functions. One custom and two native. 
We go through the list and print the __name__ and the __doc__ attributes. 
</p>


<p>
Finally, there is also a <b class="keyword">callable()</b> function. The 
function checks, if an object is a callable object. Or in other words, 
if an object is a function. 
</p>

<pre class="code">
#!/usr/bin/python

# callable.py


def fun():
   pass


print callable(fun)
print callable([])
print callable(1)
</pre>

<pre>
$ ./callable.py 
True
False
False
</pre>

<br>
<div class="center">
<img src="../images/line.png" alt="line separator">
</div>
<br>

<p>
In this part of the Python tutorial, we have talked
about introspection in Python.
</p>

<br>
<div class="center"> 
<script type="text/javascript"><!--
google_ad_client = "pub-9706709751191532";
/* horizontal */
google_ad_slot = "1734478269";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script> 
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js"> 
</script> 
</div> 
<br>


<div class="botNav, center">
<span class="botNavItem"><a href="/">Home</a></span> ‡ <span class="botNavItem"><a href="..">Contents</a></span> ‡ 
<span class="botNavItem"><a href="#">Top of Page</a></span>
</div>


<div class="footer">
<div class="signature">
<a href="/">ZetCode</a> last modified June 15, 2008  <span class="copyright">&copy; 2007 - 2011 Jan Bodnar</span>
</div>
</div>

</div>  <!-- content -->
</body>
</html>

